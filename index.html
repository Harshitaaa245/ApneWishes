<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Happy Birthday Akmal!</title>
  <style>
    body {
      background: #ffeefc;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      font-family: 'Comic Sans MS', cursive;
      overflow: hidden;
    }

    h1 {
      font-size: 2.2rem;
      color: #d63384;
      margin-bottom: 10px;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .card-stack {
      position: relative;
      width: 300px;
      height: 400px;
      perspective: 1000px;
    }

    .card {
      position: absolute;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 0.8s ease;
      border-radius: 20px;
      cursor: pointer;
    }

    .card.flipped {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 20px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
      overflow: hidden;
    }

    .card-front {
      background: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .card-front img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .card-back {
      background: #ffe0f0;
      transform: rotateY(180deg);
      padding: 20px;
      font-size: 1rem;
      line-height: 1.4;
      text-align: center;
      white-space: pre-wrap;
      overflow-y: auto;
      max-height: 100%;
      display: block; /* ðŸ‘ˆ Switch from flex to block */
}

    
    .card-back::-webkit-scrollbar {
  width: 6px;
}
.card-back::-webkit-scrollbar-thumb {
  background-color: #d63384;
  border-radius: 3px;
}

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 10;
    }

    /* Modal styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.4);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    .modal {
      background: #fff;
      padding: 20px 30px;
      border-radius: 12px;
      text-align: center;
      font-size: 1rem;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .modal .buttons {
      margin-top: 15px;
      display: flex;
      gap: 20px;
      justify-content: center;
    }

    .modal button {
      padding: 10px 20px;
      font-size: 1rem;
      border: none;
      background: #d63384;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .modal button:hover {
      background: #a71d5d;
    }
  </style>
</head>
<body>
  <h1>Happy Birthday Akmal! ðŸŽ‚</h1>
  <div class="card-stack" id="cardStack"></div>
  <canvas id="confettiCanvas"></canvas>
  <audio id="birthdayMusic" src="sounds/birthday_song.mp3" autoplay loop></audio>

  <!-- Modal -->
  <div id="actionModal" style="display:none;" class="modal-overlay">
    <div class="modal">
      <p>What would you like to do?</p>
      <div class="buttons">
        <button id="nextCardBtn">Next Card</button>
        <button id="flipBackBtn">Flip Back</button>
      </div>
    </div>
  </div>

  <script>
    const cardData = [
  {
    image: 'images/rupanjana.jpg',
    message: `Happy birthday Akmal bhai ðŸ’–\n\nMerese lamba lamba nai likha jata, khush raho, bkcdhi krte raho and I wish u every success that comes your way. Best of luck and have a happy happy birthday, loads of love ðŸ•Š`
  },
  {
    image: 'images/tamanna.jpg',
    message: `Happiest birthday AkmalðŸŒ»âœ¨\n\nCongratulations for surviving 2 decades ...so here comes the end of your teen life and I would like to give a piece of advice:\n"Arrogance shuts doors, humility opens them" (very chat GPTied)\n\nSeedhi baat no bakwaas: chup chap dhang se mere important texts ka replies kar diya karo ðŸ˜ \n\nApart from that I really hope you have amazing 20s filled with joy, excitement, thrill, learnings and what not... everything!!!!\n\nI wish you good physical and mental health (which is kind of difficult being in ECE, lately I realised). Baki aur kya... khao peeyo falo fulo mauj masti karo chutiyappa karo....\n\nMera ashirvad sada tumhare sath hai âœ‹ðŸ¼\n\nViraam.`
  },
  {
    image: 'images/saikat.jpg',
    message: `Ha bhai. Kya Hal chal. Salle yeh leh tera birthday wish:\n\nHe akmalGpt, ek bhadwe ke liye birthday wish karo, kuyki GS ne force kiya hai !!!\n\n---\n\nHappy Birthday, You dirty little chutiya (naha le bhai, aur kya ganda hostel ka room hai tera... ugh)! ðŸŽ‰\n1st time, I saw you, I was 69% sure you are 100% gay. But sadly love is blind.\n\nAnother year older, wiser (hopefully), and still managing to balance btech, mba, acting, directing, writing, porn watching together with Harshit in bed â¤ I'm honestly impressed. May Allah bless you with presidency of Rotary Club.\n\nYou never have been my partner in crime nor in chaos nor in studies nor in emotional support nor in anything â€” but you helped me whenever I needed you â¤. You gave me the confidence I needed in this club, when I needed it the most ðŸ«‚\n\nI wouldnâ€™t trade you for anything... except maybe unlimited babies bhabhis? But you get the point, right?\n\nYour existence makes life 69% funnier and 100% better (haas bsdk).\nAur shadi mai invitation dena mat bhulna. Saturday ko kiya toh veg ka option bhi rakhna.\n\n---\n\nWant to tweak it to make it more specific to your friendship?\nNhi Be lodu, itna time toh mai apni hone wali future gf ke birthday wish mai nah du jo tereko wish karne mai lagaya.\n\nLove you, idiot. Have the best birthday ever ~ from the guy whose number you never saved ðŸ’™ðŸ¥³`
  },
  {
    image: 'images/rayan.jpg',
    message: `is mahine to tu milega hi tab party le lunga tujhse tab happy birthday nahi bolunga tujhe\nbtw bro I know a secret of yours\n(Ø¢Ù¾ Ø§Ù†Ø¯Ø± Ø³Û’ Ù†Ù†Ú¯Û’ ÛÛŒÚº )`
  },
  {
    image: 'images/srishant.jpg',
    message: `Happy bday mitra , love you ðŸ˜˜ , isse jyada kya hi bolu ðŸ«¶ðŸ»ðŸ˜—`
  }

];

    const stack = document.getElementById('cardStack');
    let isFlipped = false;
    let flipping = false;

    function createCard(data, index) {
      const card = document.createElement('div');
      card.className = 'card';
      card.dataset.index = index;
      card.style.zIndex = 1000 - index;

      const front = document.createElement('div');
      front.className = 'card-face card-front';
      const img = document.createElement('img');
      img.src = data.image;
      front.appendChild(img);

      const back = document.createElement('div');
      back.className = 'card-face card-back';
      back.innerText = data.message;

      card.appendChild(front);
      card.appendChild(back);
      stack.appendChild(card);
    }

    cardData.forEach((data, i) => createCard(data, i));

    function getTopCard() {
      const cards = Array.from(document.querySelectorAll('.card'));
      return cards.reduce((top, card) =>
        parseInt(card.style.zIndex) > parseInt(top.style.zIndex) ? card : top
      );
    }

    function flipCard(card) {
      card.classList.add('flipped');
      isFlipped = true;
      launchConfetti();
    }

    function unflipCard(card) {
      card.classList.remove('flipped');
      isFlipped = false;
    }

    function resetZIndexes() {
      const cards = Array.from(document.querySelectorAll('.card'));
      cards.forEach((card, index) => {
        card.style.zIndex = 1000 - index;
      });
    }

async function handleCardClick(card) {
  if (flipping) return;

  if (!isFlipped) {
    flipping = true;
    flipCard(card);
    flipping = false;
  } else {
    const response = await askUserModal();
    if (response === 'next') {
      flipping = true;
      unflipCard(card);

      // Move the card to the bottom of the stack
      stack.removeChild(card);
      stack.appendChild(card);

      // Reassign z-indexes: top = highest
      const cards = Array.from(document.querySelectorAll('.card'));
      cards.forEach((c, i) => {
        c.style.zIndex = 1000 - i;
        c.classList.remove('flipped'); // ensure only current card is unflipped
      });

      flipping = false;
      isFlipped = false;
    } else if (response === 'flipBack') {
      flipping = true;
      unflipCard(card);
      flipping = false;
      isFlipped = false;
    }
  }
}


function askUserModal() {
  return new Promise((resolve) => {
    const modal = document.getElementById('actionModal');
    modal.style.display = 'flex';

    const nextBtn = document.getElementById('nextCardBtn');
    const flipBackBtn = document.getElementById('flipBackBtn');

    const cleanup = () => {
      modal.style.display = 'none';
      nextBtn.removeEventListener('click', onNext);
      flipBackBtn.removeEventListener('click', onFlipBack);
    };

    const onNext = () => {
      cleanup();
      resolve('next');
    };

    const onFlipBack = () => {
      cleanup();
      resolve('flipBack');
    };

    nextBtn.addEventListener('click', onNext);
    flipBackBtn.addEventListener('click', onFlipBack);
  });
}

    stack.addEventListener('click', (e) => {
      const card = getTopCard();
      if (!card.contains(e.target)) return;
      handleCardClick(card);
    });

    // Confetti setup
    const confettiCanvas = document.getElementById('confettiCanvas');
    const confetti = confettiCanvas.getContext('2d');
    let particles = [];

    function resizeCanvas() {
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function createConfetti() {
      for (let i = 0; i < 150; i++) {
        particles.push({
          x: Math.random() * confettiCanvas.width,
          y: Math.random() * confettiCanvas.height - confettiCanvas.height,
          r: Math.random() * 6 + 4,
          d: Math.random() * 50 + 10,
          color: `hsl(${Math.random() * 360}, 100%, 70%)`,
          tilt: Math.random() * 10 - 5
        });
      }
    }

    function drawConfetti() {
      confetti.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
      particles.forEach(p => {
        confetti.beginPath();
        confetti.fillStyle = p.color;
        confetti.arc(p.x, p.y, p.r, 0, Math.PI * 2, true);
        confetti.fill();
      });
      updateConfetti();
    }

    function updateConfetti() {
      particles.forEach(p => {
        p.y += Math.cos(p.d) + 2;
        p.x += Math.sin(p.d) / 2;
      });
      particles = particles.filter(p => p.y < confettiCanvas.height);
      if (particles.length > 0) {
        requestAnimationFrame(drawConfetti);
      }
    }

    function launchConfetti() {
      particles = [];
      createConfetti();
      drawConfetti();
    }

    // Music
    const music = document.getElementById('birthdayMusic');
    music.volume = 0.4;
  </script>
</body>
</html>


</body>
</html>

