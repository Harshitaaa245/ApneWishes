<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Happy Birthday Akmal!</title>
  <style>
    body {
      background: #ffeefc;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      font-family: 'Comic Sans MS', cursive;
      overflow: hidden;
    }

    h1 {
      font-size: 2.2rem;
      color: #d63384;
      margin-bottom: 10px;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .card-stack {
      position: relative;
      width: 300px;
      height: 400px;
      perspective: 1000px;
    }

    .card {
      position: absolute;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 0.8s ease;
      border-radius: 20px;
      cursor: pointer;
    }

    .card.flipped {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 20px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
      overflow: hidden;
    }

    .card-front {
      background: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .card-front img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .card-back {
      background: #ffe0f0;
      transform: rotateY(180deg);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      font-size: 1.1rem;
      line-height: 1.4;
      text-align: center;
      white-space: pre-wrap;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 10;
    }
  </style>
</head>
<body>
  <h1>Happy Birthday Akmal! ðŸŽ‚</h1>
  <div class="card-stack" id="cardStack"></div>
  <canvas id="confettiCanvas"></canvas>
  <audio id="birthdayMusic" src="sounds/birthday_song.mp3" autoplay loop></audio>

  <script>
    const cardData = [
      {
        image: 'images/rupanjana.jpg',
        message: `Happy birthday Akmal bhai ðŸ’–\n\nMerese lamba lamba nai likha jata, khush raho, bkcdhi krte raho and I wish u every success that comes your way. Best of luck and have a happy happy birthday, loads of love ðŸ•Š`
      },
      {
        image: 'images/tamanna.jpg',
        message: `Happiest birthday AkmalðŸŒ»âœ¨\n\nCongratulations for surviving 2 decades ...so here comes the end of your teen life and I would like to give a piece of advice:\n"Arrogance shuts doors, humility opens them" (very chat GPTied)\n\nSeedhi baat no bakwaas: chup chap dhang se mere important texts ka replies kar diya karo ðŸ˜ \n\nApart from that I really hope you have amazing 20s filled with joy, excitement, thrill, learnings and what not... everything!!!!\n\nI wish you good physical and mental health (which is kind of difficult being in ECE, lately I realised). Baki aur kya... khao peeyo falo fulo mauj masti karo chutiyappa karo....\n\nMera ashirvad sada tumhare sath hai âœ‹ðŸ¼\n\nViraam.`
      }
    ];

    const stack = document.getElementById('cardStack');

    function createCard(data, index) {
      const card = document.createElement('div');
      card.className = 'card';
      card.style.zIndex = cardData.length - index;

      const front = document.createElement('div');
      front.className = 'card-face card-front';
      const img = document.createElement('img');
      img.src = data.image;
      front.appendChild(img);

      const back = document.createElement('div');
      back.className = 'card-face card-back';
      back.innerText = data.message;

      card.appendChild(front);
      card.appendChild(back);
      stack.appendChild(card);
    }

    cardData.forEach((data, i) => createCard(data, i));

    const cards = Array.from(document.querySelectorAll('.card'));

    // Confetti setup
    const confettiCanvas = document.getElementById('confettiCanvas');
    const confetti = confettiCanvas.getContext('2d');
    let particles = [];

    function resizeCanvas() {
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function createConfetti() {
      for (let i = 0; i < 150; i++) {
        particles.push({
          x: Math.random() * confettiCanvas.width,
          y: Math.random() * confettiCanvas.height - confettiCanvas.height,
          r: Math.random() * 6 + 4,
          d: Math.random() * 50 + 10,
          color: `hsl(${Math.random() * 360}, 100%, 70%)`,
          tilt: Math.random() * 10 - 5
        });
      }
    }

    function drawConfetti() {
      confetti.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
      particles.forEach(p => {
        confetti.beginPath();
        confetti.fillStyle = p.color;
        confetti.arc(p.x, p.y, p.r, 0, Math.PI * 2, true);
        confetti.fill();
      });
      updateConfetti();
    }

    function updateConfetti() {
      particles.forEach(p => {
        p.y += Math.cos(p.d) + 2;
        p.x += Math.sin(p.d) / 2;
      });
      particles = particles.filter(p => p.y < confettiCanvas.height);
      if (particles.length > 0) {
        requestAnimationFrame(drawConfetti);
      }
    }

    function launchConfetti() {
      particles = [];
      createConfetti();
      drawConfetti();
    }

    // Click handling
    stack.addEventListener('click', () => {
      const topCard = cards.find(c => !c.classList.contains('flipped'));
      if (topCard) {
        topCard.classList.add('flipped');
        launchConfetti();
      } else {
        const topFlipped = cards.find(c => c.classList.contains('flipped'));
        if (topFlipped) {
          topFlipped.classList.remove('flipped');
          stack.appendChild(topFlipped); // send to back
        }
      }
    });

    // Music
    const music = document.getElementById('birthdayMusic');
    music.volume = 0.4;
  </script>
</body>
</html>
